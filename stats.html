<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        /* Position Filter */
        .position-filter {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 8px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .position-filter::-webkit-scrollbar {
            display: none;
        }

        .position-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .position-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .position-btn.active {
            background: white;
            color: #2a5298;
            border-color: white;
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            background: white;
            padding: 8px;
            gap: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: sticky;
            top: 88px;
            z-index: 99;
        }

        .view-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: #f0f2f5;
            color: #666;
            font-size: 14px;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-btn.active {
            background: #2a5298;
            color: white;
        }

        /* Container */
        .container {
            padding: 16px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Player Cards View */
        .player-grid {
            display: grid;
            gap: 12px;
            grid-template-columns: 1fr;
        }

        .player-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .player-card:active {
            transform: scale(0.98);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #eee;
        }

        .player-info h3 {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .player-meta {
            display: flex;
            gap: 8px;
            font-size: 14px;
            color: #666;
        }

        .position-badge {
            background: #e8f0fe;
            color: #2a5298;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        /* Stat Grid */
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 4px;
        }

        .stat-grid::-webkit-scrollbar {
            width: 4px;
        }

        .stat-grid::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 2px;
        }

        .stat-grid::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 2px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: #1a1a1a;
            display: block;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
            margin-top: 2px;
        }

        /* Comparison View */
        .comparison-container {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            overflow-x: auto;
        }

        .comparison-header {
            margin-bottom: 16px;
        }

        .comparison-table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .comparison-table thead {
            position: sticky;
            top: 140px;
            background: white;
            z-index: 10;
        }

        .comparison-table th {
            background: #f8f9fa;
            padding: 12px 8px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            border-bottom: 2px solid #e0e0e0;
            white-space: nowrap;
        }

        .comparison-table td {
            padding: 12px 8px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            white-space: nowrap;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .player-name-cell {
            font-weight: 600;
            color: #1a1a1a;
            position: sticky;
            left: 0;
            background: white;
            z-index: 5;
        }

        .comparison-table th:first-child {
            position: sticky;
            left: 0;
            background: #f8f9fa;
            z-index: 11;
        }

        /* Stats View */
        .stats-overview {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 16px;
        }

        .stats-overview h2 {
            font-size: 18px;
            margin-bottom: 16px;
            color: #1a1a1a;
        }

        .stat-category {
            margin-bottom: 20px;
        }

        .stat-category-title {
            font-size: 14px;
            font-weight: 600;
            color: #666;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f2f5;
            font-size: 13px;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-leaders {
            text-align: right;
            color: #666;
            font-size: 12px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        /* Responsive */
        @media (min-width: 768px) {
            .player-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stat-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .player-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .stat-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Highlight best stats */
        .stat-best {
            background: #e8f5e9;
        }

        .stat-best .stat-value {
            color: #2e7d32;
        }

        .stat-cell-best {
            color: #2e7d32;
            font-weight: 600;
        }

        /* Search Bar */
        .search-container {
            margin-bottom: 16px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Fantasy Football Dashboard</h1>
        <div class="position-filter" id="positionFilter">
            <button class="position-btn active" data-position="ALL">All</button>
            <button class="position-btn" data-position="QB">QB</button>
            <button class="position-btn" data-position="RB">RB</button>
            <button class="position-btn" data-position="WR">WR</button>
            <button class="position-btn" data-position="TE">TE</button>
            <button class="position-btn" data-position="K">K</button>
            <button class="position-btn" data-position="DST">DST</button>
            <button class="position-btn" data-position="LB">LB</button>
            <button class="position-btn" data-position="CB">CB</button>
            <button class="position-btn" data-position="S">S</button>
            <button class="position-btn" data-position="DE">DE</button>
            <button class="position-btn" data-position="DT">DT</button>
        </div>
    </div>

    <div class="view-toggle">
        <button class="view-btn active" data-view="cards">Cards</button>
        <button class="view-btn" data-view="comparison">Compare</button>
        <button class="view-btn" data-view="stats">Stats</button>
    </div>

    <div class="container">
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Search players...">
        </div>
        <div id="content"></div>
    </div>

    <script>
        // Complete Sample Data with ALL stats for each position
        const samplePlayers = [
            // Quarterbacks
            {
                id: 1,
                name: "Patrick Mahomes",
                team: "KC",
                position: "QB",
                stats: {
                    "Pass Att": 648,
                    "Comp": 435,
                    "Inc": 213,
                    "Pass Yds": 5250,
                    "Pass TD": 41,
                    "Int": 12,
                    "Sack": 26,
                    "Rush Att": 61,
                    "Rush Yds": 389,
                    "Rush TD": 2,
                    "Off Fum Ret TD": 0,
                    "2-PT": 1,
                    "Fum": 5,
                    "Fum Lost": 3
                }
            },
            {
                id: 2,
                name: "Josh Allen",
                team: "BUF",
                position: "QB",
                stats: {
                    "Pass Att": 599,
                    "Comp": 385,
                    "Inc": 214,
                    "Pass Yds": 4407,
                    "Pass TD": 35,
                    "Int": 14,
                    "Sack": 33,
                    "Rush Att": 124,
                    "Rush Yds": 762,
                    "Rush TD": 7,
                    "Off Fum Ret TD": 0,
                    "2-PT": 2,
                    "Fum": 8,
                    "Fum Lost": 4
                }
            },
            {
                id: 3,
                name: "Lamar Jackson",
                team: "BAL",
                position: "QB",
                stats: {
                    "Pass Att": 410,
                    "Comp": 265,
                    "Inc": 145,
                    "Pass Yds": 3678,
                    "Pass TD": 24,
                    "Int": 7,
                    "Sack": 28,
                    "Rush Att": 148,
                    "Rush Yds": 821,
                    "Rush TD": 5,
                    "Off Fum Ret TD": 0,
                    "2-PT": 0,
                    "Fum": 9,
                    "Fum Lost": 5
                }
            },
            // Running Backs
            {
                id: 4,
                name: "Christian McCaffrey",
                team: "SF",
                position: "RB",
                stats: {
                    "Rush Att": 272,
                    "Rush Yds": 1459,
                    "Rush TD": 14,
                    "Rec": 67,
                    "Rec Yds": 564,
                    "Rec TD": 5,
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 1,
                    "Fum": 2,
                    "Fum Lost": 1
                }
            },
            {
                id: 5,
                name: "Austin Ekeler",
                team: "LAC",
                position: "RB",
                stats: {
                    "Rush Att": 204,
                    "Rush Yds": 915,
                    "Rush TD": 13,
                    "Rec": 107,
                    "Rec Yds": 722,
                    "Rec TD": 5,
                    "Ret Yds": 15,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 0,
                    "Fum": 3,
                    "Fum Lost": 2
                }
            },
            {
                id: 6,
                name: "Nick Chubb",
                team: "CLE",
                position: "RB",
                stats: {
                    "Rush Att": 302,
                    "Rush Yds": 1525,
                    "Rush TD": 12,
                    "Rec": 36,
                    "Rec Yds": 239,
                    "Rec TD": 1,
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 0,
                    "Fum": 1,
                    "Fum Lost": 0
                }
            },
            // Wide Receivers
            {
                id: 7,
                name: "Tyreek Hill",
                team: "MIA",
                position: "WR",
                stats: {
                    "Rush Att": 6,
                    "Rush Yds": 47,
                    "Rush TD": 0,
                    "Rec": 119,
                    "Rec Yds": 1710,
                    "Rec TD": 7,
                    "Ret Yds": 26,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 0,
                    "Fum": 1,
                    "Fum Lost": 0
                }
            },
            {
                id: 8,
                name: "CeeDee Lamb",
                team: "DAL",
                position: "WR",
                stats: {
                    "Rush Att": 2,
                    "Rush Yds": 16,
                    "Rush TD": 0,
                    "Rec": 107,
                    "Rec Yds": 1359,
                    "Rec TD": 9,
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 1,
                    "Fum": 2,
                    "Fum Lost": 1
                }
            },
            {
                id: 9,
                name: "Davante Adams",
                team: "LV",
                position: "WR",
                stats: {
                    "Rush Att": 1,
                    "Rush Yds": 4,
                    "Rush TD": 0,
                    "Rec": 103,
                    "Rec Yds": 1516,
                    "Rec TD": 14,
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 0,
                    "Fum": 0,
                    "Fum Lost": 0
                }
            },
            // Tight Ends
            {
                id: 10,
                name: "Travis Kelce",
                team: "KC",
                position: "TE",
                stats: {
                    "Rush Att": 0,
                    "Rush Yds": 0,
                    "Rush TD": 0,
                    "Rec": 110,
                    "Rec Yds": 1338,
                    "Rec TD": 12,
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 0,
                    "Fum": 1,
                    "Fum Lost": 0
                }
            },
            {
                id: 11,
                name: "T.J. Hockenson",
                team: "MIN",
                position: "TE",
                stats: {
                    "Rush Att": 0,
                    "Rush Yds": 0,
                    "Rush TD": 0,
                    "Rec": 86,
                    "Rec Yds": 914,
                    "Rec TD": 6,
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 0,
                    "Fum": 0,
                    "Fum Lost": 0
                }
            },
            {
                id: 12,
                name: "Mark Andrews",
                team: "BAL",
                position: "TE",
                stats: {
                    "Rush Att": 1,
                    "Rush Yds": 8,
                    "Rush TD": 0,
                    "Rec": 73,
                    "Rec Yds": 847,
                    "Rec TD": 5,
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Off Fum Ret TD": 0,
                    "2-PT": 1,
                    "Fum": 1,
                    "Fum Lost": 1
                }
            },
            // Kickers
            {
                id: 13,
                name: "Justin Tucker",
                team: "BAL",
                position: "K",
                stats: {
                    "FG": 37,
                    "FGM": 2
                }
            },
            {
                id: 14,
                name: "Harrison Butker",
                team: "KC",
                position: "K",
                stats: {
                    "FG": 38,
                    "FGM": 3
                }
            },
            {
                id: 15,
                name: "Evan McPherson",
                team: "CIN",
                position: "K",
                stats: {
                    "FG": 35,
                    "FGM": 5
                }
            },
            // Defense/Special Teams
            {
                id: 16,
                name: "49ers Defense",
                team: "SF",
                position: "DST",
                stats: {
                    "Pts Allow": 278
                }
            },
            {
                id: 17,
                name: "Ravens Defense",
                team: "BAL",
                position: "DST",
                stats: {
                    "Pts Allow": 255
                }
            },
            {
                id: 18,
                name: "Cowboys Defense",
                team: "DAL",
                position: "DST",
                stats: {
                    "Pts Allow": 321
                }
            },
            // Defensive Ends
            {
                id: 19,
                name: "T.J. Watt",
                team: "PIT",
                position: "DE",
                stats: {
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Tack Solo": 48,
                    "Tack Ast": 19,
                    "Pass Def": 8,
                    "Sack": 19,
                    "Int": 0,
                    "Fum Rec": 2,
                    "Fum Force": 8,
                    "TD": 0,
                    "Safe": 1,
                    "Blk Kick": 0
                }
            },
            {
                id: 20,
                name: "Myles Garrett",
                team: "CLE",
                position: "DE",
                stats: {
                    "Ret Yds": 14,
                    "Ret TD": 0,
                    "Tack Solo": 42,
                    "Tack Ast": 16,
                    "Pass Def": 3,
                    "Sack": 16,
                    "Int": 0,
                    "Fum Rec": 1,
                    "Fum Force": 3,
                    "TD": 1,
                    "Safe": 0,
                    "Blk Kick": 0
                }
            },
            // Linebackers
            {
                id: 21,
                name: "Roquan Smith",
                team: "BAL",
                position: "LB",
                stats: {
                    "Ret Yds": 14,
                    "Ret TD": 0,
                    "Tack Solo": 112,
                    "Tack Ast": 46,
                    "Pass Def": 4,
                    "Sack": 4.5,
                    "Int": 1,
                    "Fum Rec": 0,
                    "Fum Force": 1,
                    "TD": 0,
                    "Safe": 0,
                    "Blk Kick": 0
                }
            },
            {
                id: 22,
                name: "Fred Warner",
                team: "SF",
                position: "LB",
                stats: {
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Tack Solo": 97,
                    "Tack Ast": 33,
                    "Pass Def": 6,
                    "Sack": 2.5,
                    "Int": 2,
                    "Fum Rec": 1,
                    "Fum Force": 4,
                    "TD": 0,
                    "Safe": 0,
                    "Blk Kick": 1
                }
            },
            // Cornerbacks
            {
                id: 23,
                name: "Sauce Gardner",
                team: "NYJ",
                position: "CB",
                stats: {
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Tack Solo": 60,
                    "Tack Ast": 8,
                    "Pass Def": 16,
                    "Sack": 0,
                    "Int": 2,
                    "Fum Rec": 0,
                    "Fum Force": 1,
                    "TD": 0,
                    "Safe": 0,
                    "Blk Kick": 0
                }
            },
            {
                id: 24,
                name: "Jalen Ramsey",
                team: "MIA",
                position: "CB",
                stats: {
                    "Ret Yds": 21,
                    "Ret TD": 0,
                    "Tack Solo": 52,
                    "Tack Ast": 15,
                    "Pass Def": 14,
                    "Sack": 0,
                    "Int": 3,
                    "Fum Rec": 1,
                    "Fum Force": 2,
                    "TD": 1,
                    "Safe": 0,
                    "Blk Kick": 0
                }
            },
            // Safeties
            {
                id: 25,
                name: "Antoine Winfield Jr.",
                team: "TB",
                position: "S",
                stats: {
                    "Ret Yds": 0,
                    "Ret TD": 0,
                    "Tack Solo": 78,
                    "Tack Ast": 25,
                    "Pass Def": 9,
                    "Sack": 3,
                    "Int": 3,
                    "Fum Rec": 1,
                    "Fum Force": 2,
                    "TD": 0,
                    "Safe": 0,
                    "Blk Kick": 0
                }
            },
            {
                id: 26,
                name: "Minkah Fitzpatrick",
                team: "PIT",
                position: "S",
                stats: {
                    "Ret Yds": 44,
                    "Ret TD": 1,
                    "Tack Solo": 64,
                    "Tack Ast": 20,
                    "Pass Def": 11,
                    "Sack": 0,
                    "Int": 6,
                    "Fum Rec": 0,
                    "Fum Force": 1,
                    "TD": 1,
                    "Safe": 0,
                    "Blk Kick": 0
                }
            },
            // Defensive Tackles
            {
                id: 27,
                name: "Aaron Donald",
                team: "LAR",
                position: "DT",
                stats: {
                    "Tack Solo": 31,
                    "Tack Ast": 19,
                    "Pass Def": 2,
                    "Sack": 5,
                    "Int": 0,
                    "Fum Rec": 0,
                    "Fum Force": 1,
                    "TD": 0,
                    "Safe": 0,
                    "Blk Kick": 0,
                    "Ret Yds": 0,
                    "Ret TD": 0
                }
            },
            {
                id: 28,
                name: "Chris Jones",
                team: "KC",
                position: "DT",
                stats: {
                    "Tack Solo": 35,
                    "Tack Ast": 26,
                    "Pass Def": 4,
                    "Sack": 15.5,
                    "Int": 0,
                    "Fum Rec": 1,
                    "Fum Force": 2,
                    "TD": 0,
                    "Safe": 1,
                    "Blk Kick": 0,
                    "Ret Yds": 0,
                    "Ret TD": 0
                }
            }
        ];

        // Complete position stat mappings from the tables
        const positionStats = {
            "QB": ["Pass Att", "Comp", "Inc", "Pass Yds", "Pass TD", "Int", "Sack", "Rush Att", "Rush Yds", "Rush TD", "Off Fum Ret TD", "2-PT", "Fum", "Fum Lost"],
            "RB": ["Rush Att", "Rush Yds", "Rush TD", "Rec", "Rec Yds", "Rec TD", "Ret Yds", "Ret TD", "Off Fum Ret TD", "2-PT", "Fum", "Fum Lost"],
            "WR": ["Rush Att", "Rush Yds", "Rush TD", "Rec", "Rec Yds", "Rec TD", "Ret Yds", "Ret TD", "Off Fum Ret TD", "2-PT", "Fum", "Fum Lost"],
           "TE": ["Rush Att", "Rush Yds", "Rush TD", "Rec", "Rec Yds", "Rec TD", "Ret Yds", "Ret TD", "Off Fum Ret TD", "2-PT", "Fum", "Fum Lost"],
           "K": ["FG", "FGM"],
           "DST": ["Pts Allow"],
           "LB": ["Ret Yds", "Ret TD", "Tack Solo", "Tack Ast", "Pass Def", "Sack", "Int", "Fum Rec", "Fum Force", "TD", "Safe", "Blk Kick"],
           "CB": ["Ret Yds", "Ret TD", "Tack Solo", "Tack Ast", "Pass Def", "Sack", "Int", "Fum Rec", "Fum Force", "TD", "Safe", "Blk Kick"],
           "S": ["Ret Yds", "Ret TD", "Tack Solo", "Tack Ast", "Pass Def", "Sack", "Int", "Fum Rec", "Fum Force", "TD", "Safe", "Blk Kick"],
           "DE": ["Ret Yds", "Ret TD", "Tack Solo", "Tack Ast", "Pass Def", "Sack", "Int", "Fum Rec", "Fum Force", "TD", "Safe", "Blk Kick"],
           "DT": ["Tack Solo", "Tack Ast", "Pass Def", "Sack", "Int", "Fum Rec", "Fum Force", "TD", "Safe", "Blk Kick", "Ret Yds", "Ret TD"]
       };

       // State
       let currentPosition = 'ALL';
       let currentView = 'cards';
       let searchQuery = '';

       // Initialize
       document.addEventListener('DOMContentLoaded', () => {
           setupEventListeners();
           render();
       });

       function setupEventListeners() {
           // Position filter
           document.getElementById('positionFilter').addEventListener('click', (e) => {
               if (e.target.classList.contains('position-btn')) {
                   document.querySelectorAll('.position-btn').forEach(btn => btn.classList.remove('active'));
                   e.target.classList.add('active');
                   currentPosition = e.target.dataset.position;
                   render();
               }
           });

           // View toggle
           document.querySelectorAll('.view-btn').forEach(btn => {
               btn.addEventListener('click', (e) => {
                   document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                   e.target.classList.add('active');
                   currentView = e.target.dataset.view;
                   render();
               });
           });

           // Search
           document.getElementById('searchInput').addEventListener('input', (e) => {
               searchQuery = e.target.value.toLowerCase();
               render();
           });
       }

       function getFilteredPlayers() {
           return samplePlayers.filter(player => {
               const matchesPosition = currentPosition === 'ALL' || player.position === currentPosition;
               const matchesSearch = searchQuery === '' || 
                   player.name.toLowerCase().includes(searchQuery) ||
                   player.team.toLowerCase().includes(searchQuery);
               return matchesPosition && matchesSearch;
           });
       }

       function render() {
           const content = document.getElementById('content');
           const filteredPlayers = getFilteredPlayers();

           if (filteredPlayers.length === 0) {
               content.innerHTML = `
                   <div class="empty-state">
                       <div class="empty-state-icon">🏈</div>
                       <h3>No players found</h3>
                       <p>Try adjusting your filters or search terms</p>
                   </div>
               `;
               return;
           }

           switch (currentView) {
               case 'cards':
                   renderCardsView(filteredPlayers);
                   break;
               case 'comparison':
                   renderComparisonView(filteredPlayers);
                   break;
               case 'stats':
                   renderStatsView(filteredPlayers);
                   break;
           }
       }

       function renderCardsView(players) {
           const content = document.getElementById('content');
           content.innerHTML = `
               <div class="player-grid">
                   ${players.map(player => renderPlayerCard(player)).join('')}
               </div>
           `;
       }

       function renderPlayerCard(player) {
           const stats = positionStats[player.position] || [];
           
           return `
               <div class="player-card fade-in">
                   <div class="player-header">
                       <div class="player-info">
                           <h3>${player.name}</h3>
                           <div class="player-meta">
                               <span class="position-badge">${player.position}</span>
                               <span>${player.team}</span>
                           </div>
                       </div>
                   </div>
                   <div class="stat-grid">
                       ${stats.map(stat => {
                           const value = player.stats[stat] || 0;
                           const isBest = checkIfBestStat(player, stat);
                           return `
                               <div class="stat-item ${isBest ? 'stat-best' : ''}">
                                   <span class="stat-value">${formatStatValue(value, stat)}</span>
                                   <span class="stat-label">${stat}</span>
                               </div>
                           `;
                       }).join('')}
                   </div>
               </div>
           `;
       }

       function renderComparisonView(players) {
           const content = document.getElementById('content');
           const stats = getStatsForPosition(currentPosition);
           
           content.innerHTML = `
               <div class="comparison-container fade-in">
                   <div class="comparison-header">
                       <h2>Player Comparison</h2>
                   </div>
                   <div class="comparison-table-wrapper">
                       <table class="comparison-table">
                           <thead>
                               <tr>
                                   <th>Player</th>
                                   ${stats.map(stat => `<th>${stat}</th>`).join('')}
                               </tr>
                           </thead>
                           <tbody>
                               ${players.map(player => `
                                   <tr>
                                       <td class="player-name-cell">${player.name}</td>
                                       ${stats.map(stat => {
                                           const value = player.stats[stat] || 0;
                                           const isBest = checkIfBestStat(player, stat);
                                           return `<td class="${isBest ? 'stat-cell-best' : ''}">${formatStatValue(value, stat)}</td>`;
                                       }).join('')}
                                   </tr>
                               `).join('')}
                           </tbody>
                       </table>
                   </div>
               </div>
           `;
       }

       function renderStatsView(players) {
           const content = document.getElementById('content');
           const stats = getStatsForPosition(currentPosition);
           const statCategories = categorizeStats(stats);
           
           content.innerHTML = `
               <div class="stats-overview fade-in">
                   <h2>Statistical Leaders</h2>
                   ${Object.entries(statCategories).map(([category, categoryStats]) => `
                       <div class="stat-category">
                           <div class="stat-category-title">${category}</div>
                           ${categoryStats.map(stat => {
                               const leaders = getStatLeaders(players, stat, 3);
                               if (leaders.length === 0) return '';
                               return `
                                   <div class="stat-row">
                                       <span>${stat}</span>
                                       <span class="stat-leaders">${leaders.map(l => `${l.name} (${formatStatValue(l.value, stat)})`).join(', ')}</span>
                                   </div>
                               `;
                           }).join('')}
                       </div>
                   `).join('')}
               </div>
           `;
       }

       function getStatsForPosition(position) {
           if (position === 'ALL') {
               // Get unique positions from filtered players
               const players = getFilteredPlayers();
               const positions = [...new Set(players.map(p => p.position))];
               
               // If all players are same position, show all stats for that position
               if (positions.length === 1) {
                   return positionStats[positions[0]] || [];
               }
               
               // For mixed positions, show common stats
               const commonStats = new Set();
               positions.forEach(pos => {
                   const stats = positionStats[pos] || [];
                   stats.forEach(stat => {
                       // Check if this stat exists for at least one player
                       const hasStatValue = players.some(p => p.stats[stat] !== undefined && p.stats[stat] !== 0);
                       if (hasStatValue) {
                           commonStats.add(stat);
                       }
                   });
               });
               
               return Array.from(commonStats);
           }
           return positionStats[position] || [];
       }

       function categorizeStats(stats) {
           const categories = {
               "Passing": ["Pass Att", "Comp", "Inc", "Pass Yds", "Pass TD", "Int", "Sack"],
               "Rushing": ["Rush Att", "Rush Yds", "Rush TD"],
               "Receiving": ["Rec", "Rec Yds", "Rec TD"],
               "Defense": ["Tack Solo", "Tack Ast", "Pass Def", "Sack", "Int", "Fum Rec", "Fum Force", "TD", "Safe", "Blk Kick"],
               "Special Teams": ["Ret Yds", "Ret TD", "FG", "FGM", "Pts Allow"],
               "Turnovers": ["Fum", "Fum Lost", "Off Fum Ret TD"],
               "Scoring": ["2-PT"]
           };

           const result = {};
           stats.forEach(stat => {
               for (const [category, categoryStats] of Object.entries(categories)) {
                   if (categoryStats.includes(stat)) {
                       if (!result[category]) result[category] = [];
                       result[category].push(stat);
                       break;
                   }
               }
           });
           return result;
       }

       function getStatLeaders(players, stat, limit = 3) {
           const playersWithStat = players.filter(p => p.stats[stat] !== undefined && p.stats[stat] !== 0);
           
           if (playersWithStat.length === 0) return [];
           
           return playersWithStat
               .map(p => ({ name: p.name, value: p.stats[stat] || 0 }))
               .sort((a, b) => {
                   // For stats where lower is better
                   if (stat === 'Int' || stat === 'Fum Lost' || stat === 'FGM' || stat === 'Pts Allow') {
                       return a.value - b.value;
                   }
                   return b.value - a.value;
               })
               .slice(0, Math.min(limit, playersWithStat.length));
       }

       function checkIfBestStat(player, stat) {
           const players = getFilteredPlayers().filter(p => p.position === player.position);
           const playerValue = player.stats[stat] || 0;
           
           // Don't highlight if value is 0
           if (playerValue === 0) return false;
           
           const values = players
               .map(p => p.stats[stat] || 0)
               .filter(v => v !== 0);
           
           if (values.length === 0) return false;
           
           if (stat === 'Int' || stat === 'Fum Lost' || stat === 'FGM' || stat === 'Pts Allow') {
               return playerValue === Math.min(...values);
           }
           return playerValue === Math.max(...values);
       }

       function formatStatValue(value, stat) {
           if (value === undefined || value === null) return '0';
           
           if (stat === 'Sack' || stat === 'Pass Def') {
               return value.toFixed(1);
           }
           if (stat === 'FG') {
               return `${value}`;
           }
           if (stat === 'FGM') {
               return `${value}`;
           }
           return value.toString();
       }

       // Add touch interactions for mobile
       let touchStartX = 0;
       let touchEndX = 0;

       document.addEventListener('touchstart', (e) => {
           touchStartX = e.changedTouches[0].screenX;
       });

       document.addEventListener('touchend', (e) => {
           touchEndX = e.changedTouches[0].screenX;
           handleSwipe();
       });

       function handleSwipe() {
           const swipeDistance = touchEndX - touchStartX;
           if (Math.abs(swipeDistance) < 50) return;

           const viewBtns = Array.from(document.querySelectorAll('.view-btn'));
           const currentIndex = viewBtns.findIndex(btn => btn.classList.contains('active'));

           if (swipeDistance > 0 && currentIndex > 0) {
               // Swipe right - go to previous view
               viewBtns[currentIndex - 1].click();
           } else if (swipeDistance < 0 && currentIndex < viewBtns.length - 1) {
               // Swipe left - go to next view
               viewBtns[currentIndex + 1].click();
           }
       }
   </script>
</body>
</html>
